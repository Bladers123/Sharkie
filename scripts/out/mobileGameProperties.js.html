<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: mobileGameProperties.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: mobileGameProperties.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// mobileGameProperties.js

/**
 * Creates attack buttons for mobile controls and attaches event listeners for these buttons.
 */
function createAttackButtons() {
    let finslapButton = document.createElement('button');
    let bubbleButton = document.createElement('button');
    createFinsSlapButton(finslapButton);
    createBubbleButton(bubbleButton);
    document.body.appendChild(finslapButton);
    document.body.appendChild(bubbleButton);
    onFinSlapButton(finslapButton);
    onBubbleButton(bubbleButton);
}

/**
 * Adds an event listener to the Fin Slap button for initiating the Fin Slap attack.
 * @param {HTMLElement} finslapButton - The button that triggers the Fin Slap attack.
 */
function onFinSlapButton(finslapButton) {
    finslapButton.addEventListener('click', function () {
        if (character) {
            keyboard.fire = true;
            character.initiateAttack('finSlap');
        }
    });
}

/**
 * Adds an event listener to the Bubble button for initiating either a poison or normal attack based on the toxic bubble bar's status.
 * @param {HTMLElement} bubbleButton - The button that triggers bubble attacks.
 */
function onBubbleButton(bubbleButton) {
    bubbleButton.addEventListener('click', function () {
        if (character) {
            keyboard.fire = true;
            if (world.toxicBubbleBar &amp;&amp; world.toxicBubbleBar.percentage > 0)
                character.initiateAttack('poison');
            else
                character.initiateAttack('normal');
        }
    });
}

/**
 * Sets properties for the Fin Slap attack button.
 * @param {HTMLElement} finslapButton - The button designated for Fin Slap attacks.
 */
function createFinsSlapButton(finslapButton) {
    finslapButton.id = 'finslap-attack-button';
    finslapButton.classList.add('finslap-attack-button');
    finslapButton.textContent = 'FS';
    finslapButton.style.display = 'none';
    finslapButton.style.display = 'block';
}

/**
 * Sets properties for the Bubble attack button.
 * @param {HTMLElement} bubbleButton - The button designated for Bubble attacks.
 */
function createBubbleButton(bubbleButton) {
    bubbleButton.id = 'bubble-attack-button';
    bubbleButton.classList.add('bubble-attack-button');
    bubbleButton.textContent = 'BL';
    bubbleButton.style.display = 'none';
    bubbleButton.style.display = 'block';
}

/**
 * Creates and configures a joystick for mobile navigation.
 */
function createJoystick() {
    let joystickElement = document.getElementById('joystick');
    if (joystickElement) {
        let joystick = initializeJoystick(joystickElement);
        movingWithJoystick(joystick);
        resetMovingWithJoystick(joystick);
    }
}

/**
 * Initializes the joystick control using the nipplejs library.
 * @param {HTMLElement} joystickElement - The DOM element where the joystick will be rendered.
 * @returns {Object} The created joystick instance.
 */
function initializeJoystick(joystickElement) {
    let joystick = nipplejs.create({
        zone: joystickElement,
        mode: 'static',
        position: { left: '50%', top: '50%' },
        color: 'white'
    });

    joystickElement.style.display = 'block';
    return joystick;
}

/**
 * Configures joystick movement handling, updating character direction based on joystick movement.
 * @param {Object} joystick - The joystick instance to attach the movement listener to.
 */
function movingWithJoystick(joystick) {
    joystick.on('move', function (event, data) {
        let angle = data.angle.degree;
        keyboard.left = false;
        keyboard.right = false;
        keyboard.up = false;
        keyboard.down = false;
        moveInDirection(angle);
        character.isCharacterMoving = true;
        character.startMovingAnimation();
    });
}

/**
 * Resets movement when joystick is released, stopping the character's movement.
 * @param {Object} joystick - The joystick instance to attach the end listener to.
 */
function resetMovingWithJoystick(joystick) {
    joystick.on('end', function () {
        keyboard.left = false;
        keyboard.right = false;
        keyboard.up = false;
        keyboard.down = false;
        character.isCharacterMoving = false;
        character.stopMovingAnimation();
    });
}

/**
 * Calculates the direction of movement based on the angle provided by the joystick.
 * @param {number} angle - The angle in degrees, provided by the joystick, indicating the direction of movement.
 */
function moveInDirection(angle) {
    if (angle >= 337.5 || angle &lt; 22.5) {
        keyboard.right = true;
    } else if (angle >= 22.5 &amp;&amp; angle &lt; 67.5) {
        keyboard.right = true;
        keyboard.up = true;
    } else if (angle >= 67.5 &amp;&amp; angle &lt; 112.5) {
        keyboard.up = true;
    } else if (angle >= 112.5 &amp;&amp; angle &lt; 157.5) {
        keyboard.up = true;
        keyboard.left = true;
    } else if (angle >= 157.5 &amp;&amp; angle &lt; 202.5) {
        keyboard.left = true;
    } else if (angle >= 202.5 &amp;&amp; angle &lt; 247.5) {
        keyboard.left = true;
        keyboard.down = true;
    } else if (angle >= 247.5 &amp;&amp; angle &lt; 292.5) {
        keyboard.down = true;
    } else if (angle >= 292.5 &amp;&amp; angle &lt; 337.5) {
        keyboard.down = true;
        keyboard.right = true;
    }
}

/**
 * Adjusts the display of mobile controls based on screen orientation.
 */
function checkOrientation() {
    if (window.innerWidth > window.innerHeight) {
        if (document.getElementById('joystick') &amp;&amp; document.getElementById('finslap-attack-button') &amp;&amp; document.getElementById('bubble-attack-button')) {
            document.getElementById('joystick').style.display = 'block';
            document.getElementById('finslap-attack-button').style.display = 'block';
            document.getElementById('bubble-attack-button').style.display = 'block';
        }
    } else {
        if (document.getElementById('joystick') &amp;&amp; document.getElementById('finslap-attack-button') &amp;&amp; document.getElementById('bubble-attack-button')) {
            document.getElementById('joystick').style.display = 'none';
            document.getElementById('finslap-attack-button').style.display = 'none';
            document.getElementById('bubble-attack-button').style.display = 'none';
        }
    }
}

window.addEventListener('load', checkOrientation);
window.addEventListener('resize', checkOrientation);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addSounds">addSounds</a></li><li><a href="global.html#checkOrientation">checkOrientation</a></li><li><a href="global.html#createAttackButtons">createAttackButtons</a></li><li><a href="global.html#createBubbleButton">createBubbleButton</a></li><li><a href="global.html#createControlsForMobile">createControlsForMobile</a></li><li><a href="global.html#createFinsSlapButton">createFinsSlapButton</a></li><li><a href="global.html#createJoystick">createJoystick</a></li><li><a href="global.html#createWorld">createWorld</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initializeJoystick">initializeJoystick</a></li><li><a href="global.html#loadEvents">loadEvents</a></li><li><a href="global.html#moveInDirection">moveInDirection</a></li><li><a href="global.html#movingWithJoystick">movingWithJoystick</a></li><li><a href="global.html#onBubbleButton">onBubbleButton</a></li><li><a href="global.html#onCloseGameIntroduction">onCloseGameIntroduction</a></li><li><a href="global.html#onCloseIntroductionsButton">onCloseIntroductionsButton</a></li><li><a href="global.html#onFinSlapButton">onFinSlapButton</a></li><li><a href="global.html#onGameIntroduction">onGameIntroduction</a></li><li><a href="global.html#onIntroductionsButton">onIntroductionsButton</a></li><li><a href="global.html#onStartButton">onStartButton</a></li><li><a href="global.html#onToggleVolumeButton">onToggleVolumeButton</a></li><li><a href="global.html#onTryAgainButton">onTryAgainButton</a></li><li><a href="global.html#onVolumeSlider">onVolumeSlider</a></li><li><a href="global.html#resetMovingWithJoystick">resetMovingWithJoystick</a></li><li><a href="global.html#resetWorld">resetWorld</a></li><li><a href="global.html#startAnimation">startAnimation</a></li><li><a href="global.html#stopAnimation">stopAnimation</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Apr 15 2024 20:22:39 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
